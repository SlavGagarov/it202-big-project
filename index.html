<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Big Project</title>
  <link href="https://unpkg.com/material-components-web@v4.0.0/dist/material-components-web.min.css" rel="stylesheet">
  <script src="https://unpkg.com/material-components-web@v4.0.0/dist/material-components-web.min.js"></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

    <style>
        :root {
            --mdc-theme-primary: green;
        }
        
                body{
            margin:0;
        }
        
        main{
            margin-left: 8px;
        }
        
    </style>
</head>

<body>
      <div class="mdc-drawer-scrim"></div>
    
    <header class="mdc-top-app-bar ">
      <div class="mdc-top-app-bar__row">
        <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-start">
          <span class="mdc-top-app-bar__title">Slav Gagarov Big Project</span>
        </section>
        <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-end" role="toolbar">
          <button id="homeButton" class="material-icons mdc-top-app-bar__action-item mdc-icon-button" aria-label="Download">home</button>
          <button id="pokeButton" class="material-icons mdc-top-app-bar__action-item mdc-icon-button" aria-label="Print this page">table_chart</button>
          <button id="weatherButton" class="material-icons mdc-top-app-bar__action-item mdc-icon-button" aria-label="Bookmark this page">show_chart</button>
        </section>
      </div>
        </header>
    
        <div class="mdc-top-app-bar--fixed-adjust">
        <div class="screen1">
        <label  for="myBrowser">Select a Pokemon:</label>
            <input list="pokeList" id="selectingOptions" name="selectingOptions" />
            <datalist id="pokeList">
            </datalist>
        <button id="searchPoke" class="mdc-button">
          <div class="mdc-button__ripple"></div>
          <span class="mdc-button__label">Go</span>
        </button>
        </div></div>
    
    <div class="screen2">
        sc2
    </div>
    
    <div class="screen3">
        sc3
    </div>
    
    <script>
        mdc.topAppBar.MDCTopAppBar.attachTo(document.querySelector('header.mdc-top-app-bar'));

        let dataRef;
        let chosenPokeLink;
        
        const showScreen = (sNumber) =>{
            switch(sNumber) {
              case 1:
                document.querySelector(".screen1").style.display="block";
                document.querySelector(".screen2").style.display = "none";
                document.querySelector(".screen3").style.display = "none";
                break;
              case 2:
                document.querySelector(".screen1").style.display="none";
                document.querySelector(".screen2").style.display = "block";
                document.querySelector(".screen3").style.display = "none";
                break;                    
              case 3:
                document.querySelector(".screen1").style.display="none";
                document.querySelector(".screen2").style.display = "none";
                document.querySelector(".screen3").style.display = "block";
                break;        
        }};
        showScreen(1);
        
        if ('serviceWorker' in navigator) {
          window.addEventListener('load', function() {
            navigator.serviceWorker.register('/sw.js').then(function(registration) {
              console.log('ServiceWorker registration successful with scope: ', registration.scope);
            }, function(err) {
              console.log('ServiceWorker registration failed: ', err);
            });
          });
        }
        
        document.querySelector("#homeButton").addEventListener("click", function(){
            showScreen(1);
        });
        document.querySelector("#pokeButton").addEventListener("click", function(){
            showScreen(2);
        });
        document.querySelector("#weatherButton").addEventListener("click", function(){
            showScreen(3);
        });
        
        document.querySelector("#searchPoke").addEventListener("click", function(){
          let selectedP = document.querySelector("#selectingOptions").value;
          console.log(selectedP);
          if(selectedP != ""){
               console.log(dataRef["results"]);
              for(let i = 0; i< dataRef["results"].length; i++){
                  //console.log("comparing: " + dataRef["results"][i]["name"] + "  " + selectedP);
                  if(dataRef["results"][i]["name"] == selectedP){
                      chosenPokeLink = dataRef["results"][i]["url"];                      
                  }
              }
              };
          });
        

        let endpoint = "https://pokeapi.co/api/v2/pokemon";
          fetch(endpoint)
          .then(response => response.json())
          .then(data => {
           
           let datalistRef = document.querySelector("#pokeList");
               let keys = data["results"];
               keys.forEach(val => {
                   let newOption = document.createElement("option");
                   newOption.value = val["name"];
                   datalistRef.appendChild(newOption);
             });
            console.log(data);
            dataRef=data;
        });
        
    </script>
    </body>
</html>